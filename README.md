# Совмещение гиперспектральных и температурных изображений
В программном интерфейсе выполняется совмещение температурных снимков (TIR) и гиперспектральных изображений (HSI), которые имеют разное разрешение. Алгоритм совмещает изображения по точкам, которые указываются в интерфейсе пользователем, а также ограничивает совмещенные данные выбранной прямоугольной областью. Использующийся алгоритм совмещения данных – нахождение и применение к TIR матрицы гомографии, использующий 4 и более точек соответствия. 

Программа представляет собой графический интерфейс на языке python3, написанный с использованием модуля PyQt5 и преобразованный в исполняемый файл. Запуск программы осуществляется путем открытия файла main.exe. Ссылка на программу и тестовые данные: https://disk.yandex.ru/d/_fIpQfYS4JvuEQ

# Данные для испытания 

Изображения коробок с горшками растения пшеницы, снятой в разные дни. 

Day-6 Box-3.hdr, Day-6 Box-3.hdr, Day-8 Box-3.dat, Day-8 Box-3.hdr – данные HSI. Day-6 Box-3.xlsx, Day-8 Box-3.xlsx – данные TIR (в формате таблицы).

# Пример использования 1

Пользователем нажимается кнопка «Open HSI», после чего выбирается файл «Data/Example 1/Day-6 Box-3.hdr». Псевдо-RGB изображение, (соответствущее выбранному HSI) отобразится в интерфейсе программы.

Далее нажимается кнопка «Open TIR», после чего выбирается файл «Data/Example 1/Day-6 Box-3.xlsx». TIR изображение в пседоцвете отобразится в интерфейсе программы. 
Изображения являются интерактивными элементами – при движении указателя мыши по изображению отображаются координаты (x, y) пикселя, а также его значение. Под каждым изображением есть панель инструментов, на которой кнопка в виде лупы отвечает за приближение областей на изображениях.

На изображении расположено 15 горшков слева и 15 горшков справа. Будет реализовано совмещение центрального горшка с правой стороны (2-й справа от центральной лампы). Для удобства совмещения рекомендуется приблизить этот горшок на обоих изображениях (кнопка «лупа» на панели инструментов). 

Далее следует разметка точками совмещения. Они должны быть выбраны в определенной последовательности (точка p1 на HSI соответствует точке p1’ на TIR, точка p2 на HSI соответствует точке p2’ на TIR и т.д). В качестве точек удобно выбирать те, которые находятся на пересечении листьев, в дырках между листьями, на краях горшков и прочих элементов, которые четко выражены на обоих изображениях. Нужно выбрать режим «Совмещение точек» в правом верхнем углу интерфейса, после чего кликать на нужные точки правой кнопкой мыши. Если точка отмечена некорректно, то кнопка «Назад» отменит ее нанесение. В качества примера приведены следующие 6 пар точек совмещения (указаны координаты x, y, которые нужно отметить):

Для HSI: (359, 238), (379, 258), (393.5, 271.5), (390, 309), (356, 298), (327.2, 259.4).

Для TIR: (205, 109), (218, 121), (228, 129), (225, 154), (204, 146), (185, 122). 

После выбора точек совмещения необходимо выбрать область, ограничивающую горшок. Для этого нужно выбрать режим «Выбрать область» (в правом верхнем углу интерфейса), после чего правой кнопкой мыши на HSI отмечаются две точки ограничивающего прямоугольника. Рекомендуется использовать точки: (340, 243), (391, 297). 

Когда прямоугольник отмечен, следующим шагом будет совмещение изображений (кнопка «Совместить»). Далее следует визуальное сравнение двух изображений на корректность совмещения. Если оно устраивает, то результат сохраняется (кнопка «Сохранить») в виде массива numpy для последующей программной обработки.

# Пример использования 2

По аналогии открываются файлы из директории «Example 2». Проверяется возможность совмещения не одного горшка, а целой коробки. Точки совмещения выбираются на колбах с водой (по 5 шт. на изображении). Для удобства границы температуры на TIR (текстовые поля справа от кнопки Open TIR) выбираются [18, 26] градусов, и нажимается кнопка «Enter». Рекомендуемые точки совмещения: 

Для HSI: (47, 88.5), (454, 84.5), (457, 408), (47, 412), (253, 247).

Для TIR: (18.7, 16), (280, 14), (281, 220), (19, 221), (150, 116).

Область ограничить точками: (36, 76), (469, 412). Как результат – произойдет совмещение целой коробки с горшками. 











